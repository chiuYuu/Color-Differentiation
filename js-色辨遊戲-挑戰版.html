<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‰²è¾¨éŠæˆ²ç°¡æ˜“ç‰ˆ</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            border-radius: 10px;
        }

        #container {
            width: 100%;
            height: 100dvh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #F06060;
            position: relative;
        }

        #score-box {
            width: 200px;
            height: 100px;
            background-color: whitesmoke;
            border: 5px dashed #3b93d2;
            position: absolute;
            top: 10px;
            left: 10px;
            line-height: 90px;
            text-align: center;
        }

        #score-text {
            font-size: 48px;
            font-family: 'ä¿æ–¹é«”11è™Ÿ';
            color: #3b93d2;
            font-weight: bolder;
        }

        #time-box {
            width: 200px;
            height: 100px;
            background-color: #ddd;
            border: 10px inset #d33434;
            position: absolute;
            top: 10px;
            right: 10px;
            line-height: 90px;
            text-align: center;
        }

        #time-text {
            font-size: 48px;
            font-family: 'ä¿æ–¹é«”11è™Ÿ';
            color: #d33434;
            font-weight: bolder;
        }

        #pause-box {
            width: 190px;
            height: 60px;
            position: absolute;
            bottom: 10px;
            right: 10px;
            background-color: #3b93d2;
            border: 5px outset whitesmoke;
            color: #ddd;
            font-size: 32px;
            font-family: 'ä¿æ–¹é«”11è™Ÿ';
            cursor: pointer;
        }

        #cube-box {
            width: 500px;
            height: 500px;
            background-color: #ddd;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            cursor: pointer;
            justify-content: space-between;
        }

        .color,
        .color-opacity {
            margin: 5px;
        }

        #back {
            margin-top: 20px;
            width: 200px;
            height: 60px;
            background-color: #3b93d2;
            border: 5px outset whitesmoke;
            font-size: 32px;
            font-family: 'ä¿æ–¹é«”11è™Ÿ';
            cursor: pointer;
            position: absolute;
            bottom: 10px;
            left: 10px;
        }

        #back:hover {
            color: aliceblue;
            background-color: #4dd23b;
        }
    </style>
</head>

<body>
    <section id="container">
        <div id="score-box">
            <span id="score-text"></span>
        </div>

        <div id="time-box">
            <span id="time-text">60</span>
        </div>

        <div >
            <button id="pause-box" type="button">æš«åœ</button>
        </div>

        <div id="cube-box"></div>

        <a href="./index.html">
            <button id="back" type="button">å›é¸æ“‡é </button>
        </a>
    </section>

    <script>
        // 1. ç•«é¢ä¸Šå°å‡º 2 * 2 çš„é¡è‰²éš¨æ©Ÿçš„æ–¹å¡Š
        // 2. éš¨æ©Ÿä¸€å€‹æ–¹å¡Šçš„é¡è‰²è¼ƒé€æ˜ï¼Œè¡¨ç¤ºé€™æ˜¯ç­”æ¡ˆ
        // 3. ä½¿ç”¨è€…é»æ“Šç­”æ¡ˆæ–¹å¡Šå¾Œï¼Œé‡æ–°ç”Ÿæˆæ–°çš„é¡è‰²éš¨æ©Ÿçš„æ–¹å¡Š
        // 4. æ¯éä¸€é—œæ–¹å¡Šæ•¸é‡æœƒå¢åŠ ï¼Œæœ€é«˜ç”Ÿæˆ 8 * 8 çš„é¡è‰²éš¨æ©Ÿçš„æ–¹å¡Š
        // 5. æœ‰è¨ˆåˆ†å™¨åŠè¨ˆæ™‚å™¨ï¼Œ60ç§’å€’æ•¸ï¼Œæ™‚é–“åˆ°å‰‡è·³å‡ºæ­å–œä¸¦é¡¯ç¤ºç²å¾—å¹¾åˆ†ï¼Œä¸¦é‡é ­é–‹å§‹éŠæˆ²

        const cube = document.querySelector('#cube-box'); // å…¨åŸŸè®Šæ•¸
        const scoreText = document.querySelector('#score-text');
        const timeCount = document.querySelector('#time-text');
        const pause = document.querySelector('#pause-box');

        let winTimes = 0;
        let score = 0; 
        let boxNum = 2; // è®“ä¸€é–‹å§‹çš„ box æ•¸é‡ç‚º2
        let timeLeft = 60;
        let isPause = false;

        // å‘¼å«ç”Ÿæˆæ–¹å¡Š
        createCube();
        timeCountDown();
        
        // è¨­ä¸€å€‹å€’æ•¸è¨ˆæ™‚çš„å‡½å¼
        function timeCountDown() {
            if (!isPause && timeLeft > 0) {
                timeLeft--;
                timeCount.textContent = timeLeft;
            } 

            if(timeLeft > 0){
                setTimeout(timeCountDown, 1000);
            } else {
                alert('æ™‚é–“åˆ°äº† å†ä¾†ä¸€æ¬¡\r Î”~~~Î” \r Î¾ ï½¥ã‚§ï½¥ Î¾ \r Î¾ã€€~ã€€Î¾ \r  Î¾ã€€ã€€ Î¾ \r  Î¾ã€€ã€€  â€œ~ï½~ï½ã€‡ \r  Î¾ã€€ã€€ã€€ã€€ã€€ã€€ Î¾ \r   Î¾   Î¾   Î¾~ï½~Î¾   Î¾ \rã€€Î¾_Î¾Î¾_Î¾ã€€Î¾_Î¾Î¾_Î¾ \r ç¦ç‰Ş¬ ï¼ˆğ“ƒâ²¹ğ“ƒï¼‰ Şª \r ã€€ã€€â£ â£¶â¡¾â â ‰â ™â ³â¢¦â¡€â €â €   â¢ â â ‰â ™â ²â¡€â €\r â €â €â €â£´â ¿â â €â €â €â €â €â € â¢³â¡€â €  â¡â €    â¢· \r â €â €â¢ â£Ÿâ£‹â¡€â¢€â£€â£€â¡€â €â£€â¡€â£§â € â¢¸  â €    â¡‡ \r â €â €â¢¸â£¯â¡­â â ¸â£›â£Ÿâ †â¡´â£»â¡²â£¿â €â£¸â €   ï¼Ÿ  â¡‡ \r â €â €â£Ÿâ£¿â¡­â €â €â €â €â €â¢±â €â € â£¿â €â¢¹â €â €     â¡‡ \r â €â €â ™â¢¿â£¯â „â €â €â €â¢€â¡€â €â €â¡¿â €  â¡‡    â¡¼ \r â €â €â €â €â ¹â£¶â †â €â €â €â €â €â¡´â ƒâ €â €â ˜â ¤â£„â£ â â € \r â €â €â €â €â €â¢¸â£·â¡¦â¢¤â¡¤â¢¤â£â£â €â €â €â €â €â €â €â €â €â €\r â €â €â¢€â£¤â£´â£¿â£â â €â €â ¸â£â¢¯â£·â£–â£¦â¡€â €â €â €â €â €\r â¢€â£¾â£½â£¿â£¿â£¿â£¿â ›â¢²â£¶â£¾â¢‰â¡·â£¿â£¿â µâ£¿â €â €â €â €â €\râ €â£¼â£¿â â ‰â£¿â¡­â ‰â ™â¢ºâ£‡â£¼â¡â €â €â €â£„â¢¸â €â €â €â €â €â €\r â£¿â£¿â£§â£€â£¿.........â£€â£°â£â£˜â£†........');
            }
        }

        pause.addEventListener('click', function(){
            isPause = !isPause;
            if (isPause) {
                pause.textContent = 'ç¹¼çºŒ';
                cube.style.pointerEvents = 'none'; // é»æš«åœä¹‹å¾Œä¸å¯ä»¥å·é»æ–¹å¡Š
            } else {
                pause.textContent = 'æš«åœ';
                cube.style.pointerEvents = 'auto';
            }
        });

        // è¨­ä¸€å€‹function å»ç”Ÿæˆéš¨æ©Ÿçš„rgb èˆ‡ opacity çš„å€¼ (æœ‰é‡è¤‡å¹¾æ¬¡å°±å‘¼å«é€™å€‹function)
        function colorSettings() {
            let r = Math.floor(Math.random() * 256);
            let g = Math.floor(Math.random() * 256);
            let b = Math.floor(Math.random() * 256);
            let o = (Math.random() * (0.8 - 0.3) + 0.3).toFixed(1);
            // å°‡é€™äº›å€¼æ‰“åŒ…å‚³å›å»
            return { r, g, b, o };
        }

        // ç”Ÿæˆæ–¹å¡Šçš„å‡½å¼
        function createCube() {
            let { r, g, b, o } = colorSettings();
            let littleCube = ''

            // è¨­å®šç”Ÿå‡ºä¾†çš„ cube åœ¨ cube-box å…§çš„å¤§å°
            const boxTotal = boxNum * boxNum;
            const randomCube = Math.floor(Math.random() * boxTotal);
            // cube-box çš„ px - å·¦å³padding px - (box + æ¯ä¸€å€‹boxè¡Œåˆ—é–“çš„é–“è·) * å…©é‚Šçš„margin px
            const weightAndHeight = (500 - 2 * 10 - (boxNum + 1) * 5 * 2) / boxNum;

            for (let i = 0; i < boxTotal; i++) {
                // éš¨æ©Ÿç”¢ç”Ÿ 0 ~ 3 çš„æ•¸å­—
                if (i === randomCube) {
                    littleCube += `<div class="color-opacity"; style="width: ${weightAndHeight}px; height:${weightAndHeight} px; background-color: rgb(${r}, ${g}, ${b}, ${o})"></div>`;
                } else {
                    littleCube += `<div class="color"; style="width: ${weightAndHeight}px; height:${weightAndHeight} px; background-color: rgb(${r}, ${g}, ${b})"></div>`;
                }
            }
            cube.innerHTML = littleCube;
            // å‘¼å«ç¶å®šäº‹ä»¶çš„å‡½å¼
            clickCubeEvent();
        }

        function clickCubeEvent() {
            document.querySelector('.color-opacity').addEventListener('click', function () {
                winTimes++;
                score++;
                if (timeLeft === 0) {

                    winTimes = 0;
                    score = 0;
                    boxNum = 2;
                    timeLeft = 60;
                    timeCountDown();
                } else if (score % 4 === 0) {
                    boxNum++;
                }
                console.log(score);
                scoreText.textContent = score;
                createCube();
            });
        }
    </script>
</body>

</html>